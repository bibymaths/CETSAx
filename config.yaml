# Paths
input_csv: "data/nadph.csv"
scripts_dir: "scripts"
results_dir: "results"

# Python Environment
python_bin: "python"

# ESM / Sequence Model
seq_model:
  # ESM-2 checkpoint summary:
  # - esm2_t48_15B_UR50D : 48 layers, ~15B parameters
  # - esm2_t36_3B_UR50D  : 36 layers, ~3B parameters
  # - esm2_t33_650M_UR50D: 33 layers, ~650M parameters
  # - esm2_t30_150M_UR50D: 30 layers, ~150M parameters
  # - esm2_t12_35M_UR50D : 12 layers, ~35M parameters
  # - esm2_t6_8M_UR50D   : 6 layers, ~8M parameters
  model_name: "facebook/esm2_t12_35M_UR50D"
  max_len: 1022
  num_classes: 2
  task: "classification"     # classification | regression
  device: "cuda"              # cpu | cuda
  epochs: 100
  lr: 5e-5
  patience: false
  repr_layer: 12

  # Training batch size:
  # - if embedding_cache=true: this is mostly used for caching (ESM forward) and/or head-only.
  # - head-only training can be bigger; we’ll set head_batch_size separately.
  batch_size: 8

  # For 1×15GB GPU with ESM2-650M: keep ESM forward tiny
  esm_batch_size: 2

  # Caching
  cache:
    dir: "results/cache"
    token_cache: true
    pooled_cache: true        # pooled embeddings cache (N,D)  -> fast training/pred
    reps_cache: true         # residue reps cache (list of (L,D)) -> needed for saliency/IG without ESM
    fp16: true                # store pooled cache as fp16 to save disk/mem

  # Head-only training batch size (when pooled_cache=true)
  head_batch_size: 256

# Prediction settings
predict:
  mode: "reps"              # pooled | reps | tokens
  batch_size: 256             # head-only batch size for pooled/reps
  esm_batch_size: 2           # only used when mode=tokens
  saliency: true             # only valid for reps/tokens
  ig: true                   # only valid for reps/tokens
  ig_steps: 50

# --- CETSA Experimental Parameters ---
experiment:
  dose_columns:
    - "3.81e-06"
    - "1.526e-05"
    - "6.104e-05"
    - "0.00024414"
    - "0.00097656"
    - "0.00390625"
    - "0.015625"
    - "0.0625"
    - "0.25"
    - "1"

  qc_thresholds:
    min_unique_peptides: 3
    min_psms: 15
    min_countnum: 8

  column_names:
    id: "id"
    condition: "condition"
    sum_unipeps: "sumUniPeps"
    sum_psms: "sumPSMs"
    countnum: "countNum"